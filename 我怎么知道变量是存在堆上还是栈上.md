# 我怎么知道变量是存在堆上还是栈上?

准确来说，你其实不需要关心变量到底存在什么地方。主要有引用指向某个变量，那么它就一定存在。具体存在什么地方取决于每个语言的实现方式。

变量存在什么地方确实会影响到程序的运行效率。Go编译器会把一个函数中的局部变量放在这个函数的栈中，但是如果编译器无法保证变量在函数执行完毕返回后，还有地方被引用，编译器会把遍历那个放置在垃圾回收堆中来避免悬挂指针错误（dangling pointer errors）。另外如果本地变量很大，这个变量放在堆上比放在栈上更加合理。

在目前编译器的实现中，如果一个变量占据了一个地址(address)，就有资格被分配到堆上，但是经过基础的“逃逸分析”，某种情况下，在函数执行完后，变量会重新回到堆上。

```go
correctness n 正确
standpoint 立场
```

